"use strict";(self.webpackChunkplanner_frontend=self.webpackChunkplanner_frontend||[]).push([[639],{9639:function(e,t,n){n.r(t),n.d(t,{default:function(){return $}});var a=n(2791),s=n(9434),r=n(6907),c=n(9230),i=n(8949),l=function(e){return e.todos.totalPages},d=function(e){return e.todos.page},o=function(e){return e.todos.totalTodos},u=function(e){return e.todos.filter},h=function(e){return e.todos.filter?e.todos.items.filter((function(t){var n=t.title,a=t.description;return n.toLowerCase().includes(e.todos.filter.toLowerCase())||a.toLowerCase().includes(e.todos.filter.toLowerCase())})):e.todos.items},x=n(9439),p=n(3402),m=n(6856),f=n(9126),j=n(2222),v=function(e){if(e){var t=e.slice(0,10).split("-"),n=(0,x.Z)(t,3),a=n[0],s=n[1],r=n[2];return"".concat(r,".").concat(s,".").concat(a)}},b=n(3027),g=n(3360),Z=n(3329);function _(e){var t=e.handleSubmit,n=e.descriptionUpdate,a=e.handleChange,s=e.description,r=e.reset,i=(0,c.$G)().t;return(0,Z.jsxs)(b.Z,{onSubmit:t,children:[(0,Z.jsx)(b.Z.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:(0,Z.jsx)(b.Z.Control,{as:"textarea",rows:3,type:"text",name:"description",value:n,onChange:a})}),(0,Z.jsx)(g.Z,{className:"me-3",variant:"primary",type:"submit",disabled:n===s,children:i("update_todo")}),(0,Z.jsx)(g.Z,{variant:"secondary",onClick:function(){return r()},children:i("cancel")})]})}var w=function(e){var t=e._id,n=e.title,r=e.description,l=e.createdAt,d=e.updatedAt,o=e.plannedDate,u=e.completedDate,h=e.overdueDate,w=(0,a.useState)(!1),y=(0,x.Z)(w,2),C=y[0],k=y[1],D=(0,a.useState)(r),N=(0,x.Z)(D,2),P=N[0],S=N[1],I=localStorage.getItem("selectedLanguage"),L=(0,s.I0)(),F=(0,c.$G)().t,M=null!==u,G=null!==h;(0,a.useEffect)((function(){Array.from(document.querySelectorAll('[data-bs-toggle="tooltip"]')).forEach((function(e){new window.bootstrap.Tooltip(e)}))}),[I]);var A=function(e,t){e.target.blur(),function(e){L((0,j.$k)(e)),M?p.ZP.success("".concat(F("todo_not_completed"))):p.ZP.success("".concat(F("todo_completed")))}(t)};return(0,Z.jsxs)(i.Z.Item,{eventKey:t,children:[(0,Z.jsxs)("div",{className:"d-flex gap-3 align-items-center px-3",children:[!G&&(0,Z.jsx)(b.Z.Check,{"data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-title":"".concat(F("is_completed")),"aria-label":"option 1",id:"toggle-check-".concat(t),type:"checkbox",variant:"outline-primary",checked:M,disabled:!0===C,value:"1",onChange:function(e){return A(e,t)}}),G&&(0,Z.jsx)(b.Z.Check,{"data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-title":"".concat(F("is_overdue")),isInvalid:!0,defaultChecked:!0,type:"radio",id:"toggle-check-".concat(t)}),(0,Z.jsx)(i.Z.Header,{className:"w-100",children:(0,Z.jsx)("h5",{"data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-title":n,className:"w-100 mb-0 text-truncate custom-accordion-header",children:n})}),M||G?(0,Z.jsx)(g.Z,{"data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-title":"".concat(F("add_to_archive")),className:"ms-auto btn btn-success",type:"button",children:(0,Z.jsx)(f.JNM,{})},"archive-".concat(t)):(0,Z.jsx)(g.Z,{"data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-title":"".concat(F("delete")),disabled:C,className:"ms-auto btn btn-danger",type:"button",onClick:function(){return function(e){L((0,j.uv)(e)),p.ZP.success("".concat(F("todo_deleted")))}(t)},children:(0,Z.jsx)(m.I0,{})})]}),(0,Z.jsx)(i.Z.Body,{className:"p-3",onExited:function(){return k(!1)},children:C?(0,Z.jsx)(_,{handleSubmit:function(e){e.preventDefault(),L((0,j.Lo)({_id:t,description:P})),p.ZP.success("".concat(F("todo_update"))),k(!1)},descriptionUpdate:P,handleChange:function(e){var t=e.currentTarget,n=t.name,a=t.value;if("description"===n)S(a)},description:r,reset:function(){k(!1),S(r)}}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("p",{className:"mb-3",children:r}),(0,Z.jsxs)("div",{className:"d-flex flex-wrap gap-3 align-items-center",children:[(0,Z.jsxs)("div",{children:[F("created"),": ",(0,Z.jsx)("b",{children:v(l)})]}),(0,Z.jsxs)("div",{children:[F("updated"),": ",(0,Z.jsxs)("b",{children:[" ",v(d)]})]}),(0,Z.jsxs)("div",{children:[F("planned_date"),": ",(0,Z.jsxs)("b",{children:[" ",v(o)]})]}),null===h&&(0,Z.jsxs)("div",{className:M?"text-success":"",children:[F("completed"),":",(0,Z.jsxs)("b",{children:[" ",M?v(u):"??.??.????"]})]}),G&&(0,Z.jsxs)("div",{className:"text-danger",children:[F("is_overdue"),": ",(0,Z.jsx)("b",{children:v(h)})]}),(0,Z.jsx)(g.Z,{"data-bs-title":"".concat(F("edit")),disabled:M||G,className:"ms-auto btn btn-primary",type:"button",onClick:function(){return k(!0)},children:(0,Z.jsx)(m.z8Y,{})})]})]})})]})},y=function(){var e=(0,s.v9)(h),t=(0,c.$G)().t;return(0,Z.jsx)("div",{className:"mb-5",children:0!==e.length?(0,Z.jsx)(i.Z,{alwaysOpen:!0,children:e.map((function(e){var t=e._id,n=e.title,a=e.description,s=e.createdAt,r=e.updatedAt,c=e.plannedDate,i=e.completedDate,l=e.overdueDate;return(0,Z.jsx)(w,{_id:t,title:n,description:a,createdAt:s,updatedAt:r,plannedDate:c,completedDate:i,overdueDate:l},t)}))}):(0,Z.jsx)("div",{className:"text-center py-5 border rounded bs-accordion-bg",children:(0,Z.jsx)("p",{children:t("no_todos_text")})})})},C=n(9513),k=n.n(C);n(8639);var D=function(e){var t=e.selectedPeriod,n=e.setPlannedDate,s=(0,a.useState)(null),r=(0,x.Z)(s,2),c=r[0],i=r[1];return(0,a.useEffect)((function(){"date"!==t&&i(null)}),[t]),(0,Z.jsxs)("div",{className:"d-flex gap-1 align-items-center ".concat("date"===t&&"text-primary"),children:[(0,Z.jsx)(m.sHf,{}),(0,Z.jsx)(k(),{selected:c,onChange:function(e){i(e),n(e)},className:"w-100 text-center"})]})},N=["week","month","3_months","half_year","year","3_years","5_years"],P=function(e){var t,n=e.text,a=e.plannedDate,s=new Date;switch(n){case"week":t=new Date(s.getTime()+6048e5);break;case"month":t=new Date(s.getFullYear(),s.getMonth()+1,s.getDate());break;case"3_months":t=new Date(s.getFullYear(),s.getMonth()+3,s.getDate());break;case"half_year":t=new Date(s.getFullYear(),s.getMonth()+6,s.getDate());break;case"year":t=new Date(s.getFullYear()+1,s.getMonth(),s.getDate());break;case"3_years":t=new Date(s.getFullYear()+3,s.getMonth(),s.getDate());break;case"5_years":t=new Date(s.getFullYear()+5,s.getMonth(),s.getDate());break;case"date":t=a}return t};function S(e){var t=e.plannedDate,n=e.setPlannedDate,a=e.selectedPeriod,s=e.setSelectedPeriod,r=(0,c.$G)().t;return(0,Z.jsxs)("div",{className:"d-flex flex-wrap gap-3 align-items-center",children:[N.map((function(e){return(0,Z.jsx)(b.Z.Check,{style:{width:"122px"},checked:a===e,label:"".concat(r(e)),name:"plannedDate",type:"radio",id:"inline-radio-".concat(e),onChange:function(){s(e),n(P({text:e,plannedDate:t}))}},"".concat(r(e)))})),(0,Z.jsxs)(b.Z.Label,{children:[(0,Z.jsx)(b.Z.Check,{checked:"date"===a,inline:!0,name:"plannedDate",type:"radio",className:"btn-check",id:"inline-radio-date",onChange:function(){var e="date";s(e),n(P({text:e,plannedDate:t}))}},"date"),(0,Z.jsx)(D,{selectedPeriod:a,setPlannedDate:n})]})]})}function I(){var e=(0,a.useState)(""),t=(0,x.Z)(e,2),n=t[0],r=t[1],l=(0,a.useState)(""),d=(0,x.Z)(l,2),o=d[0],u=d[1],h=(0,a.useState)(""),m=(0,x.Z)(h,2),f=m[0],v=m[1],_=(0,a.useState)(""),w=(0,x.Z)(_,2),y=w[0],C=w[1],k=(0,a.useState)(null),D=(0,x.Z)(k,2),N=D[0],P=D[1],I=(0,c.$G)().t,L=(0,s.I0)(),F=function(e){var t=e.currentTarget,n=t.name,a=t.value;switch(n){case"title":r(a);break;case"description":u(a)}},M=function(){r(""),u(""),v(""),C("")};return(0,Z.jsx)(i.Z,{activeKey:N,onSelect:function(e){P(e)},children:(0,Z.jsxs)(i.Z.Item,{eventKey:"0",children:[(0,Z.jsx)(i.Z.Header,{children:(0,Z.jsx)("h3",{className:"mb-0 ms-auto ",children:I("form_add_todo_title")})}),(0,Z.jsx)(i.Z.Body,{children:(0,Z.jsxs)(b.Z,{onSubmit:function(e){e.preventDefault(),L((0,j.Iv)({title:n,description:o,plannedDate:f})),p.ZP.success("".concat(I("todo_added"))),M()},children:[(0,Z.jsxs)(b.Z.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,Z.jsx)(b.Z.Label,{visuallyHidden:!0,children:I("title_todo")}),(0,Z.jsx)(b.Z.Control,{type:"text",name:"title",required:!0,value:n,onChange:F,placeholder:I("placeholder_title")})]}),(0,Z.jsxs)(b.Z.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[(0,Z.jsx)(b.Z.Label,{visuallyHidden:!0,children:I("description")}),(0,Z.jsx)(b.Z.Control,{as:"textarea",rows:6,type:"text",name:"description",value:o,onChange:F,placeholder:I("placeholder_description")})]}),(0,Z.jsxs)("div",{className:"d-flex flex-wrap mb-3",children:[(0,Z.jsxs)("h5",{className:"d-inline-block me-3 mb-3",children:["".concat(I("planned_date")),":"]}),(0,Z.jsx)(S,{plannedDate:f,setPlannedDate:v,selectedPeriod:y,setSelectedPeriod:C})]},"inline-radio"),(0,Z.jsx)(g.Z,{className:"me-3",variant:"primary",type:"submit",disabled:!n||!o||!y,children:I("add_todo")}),(0,Z.jsx)(g.Z,{variant:"secondary",onClick:function(){M(),"0"===N&&P(null)},children:I("cancel")})]})})]})})}var L=n(473),F=n(2227),M=function(e){var t=e.filter,n=(0,s.v9)(u),a=(0,c.$G)().t,r=(0,s.I0)();return(0,Z.jsx)(b.Z,{className:"d-flex mb-3",children:(0,Z.jsxs)(b.Z.Label,{className:"mb-0 d-flex align-items-center",children:[(0,Z.jsx)(b.Z.Control,{type:"text",name:t,value:n,onChange:function(e){var t=e.currentTarget.value;r((0,F.zK)(t))},placeholder:a("placeholder_search"),className:"me-2","aria-label":"Search"}),(0,Z.jsx)(L.Z,{onClick:function(e){e.target.blur(),r((0,F.Dg)())}})]})})},G=function(){var e=(0,s.v9)(o),t=(0,s.v9)(l),n=(0,c.$G)().t;return(0,Z.jsxs)("div",{className:"d-flex flex-wrap gap-3 align-items-center mb-3 ms-auto",children:[(0,Z.jsxs)("div",{children:[n("all_todos"),": ",(0,Z.jsx)("b",{children:e})]}),(0,Z.jsxs)("div",{children:[n("page"),": ",(0,Z.jsx)("b",{children:t})]}),(0,Z.jsxs)("div",{children:[n("completed"),": ",(0,Z.jsx)("b",{children:"0"})]}),(0,Z.jsxs)("div",{children:[n("is_overdue"),": ",(0,Z.jsx)("b",{children:"0"})]}),(0,Z.jsxs)("div",{children:[n("archive"),": ",(0,Z.jsx)("b",{children:"0"})]})]})},A=n(3433),T=n(8116);function E(e){var t=e.page,n=e.totalPages,s=e.handlePageChange,r=(0,a.useState)(5),c=(0,x.Z)(r,2),i=c[0],l=c[1],d=function(){window.innerWidth<425?l(1):window.innerWidth<576?l(3):window.innerWidth<992?l(5):l(7)};(0,a.useEffect)((function(){return d(),window.addEventListener("resize",d),function(){window.removeEventListener("resize",d)}}),[]);var o=1===t,u=t===n,h=function(){if(n<=i)return(0,A.Z)(Array(n)).map((function(e,t){return t+1}));var e=Math.floor(i/2),a=Math.max(t-e,1),s=Math.min(t+e,n);t<=e?s=i:t>n-e&&(a=n-i+1);var r=[];1!==a&&(r.push(1),2!==a&&r.push("..."));for(var c=a;c<=s;c++)r.push(c);return s!==n&&(s!==n-1&&r.push("..."),r.push(n)),r}();return(0,Z.jsx)(Z.Fragment,{children:n>1&&(0,Z.jsxs)(T.Z,{className:"mx-auto",children:[(0,Z.jsx)(T.Z.First,{onClick:function(){return s(1)},disabled:o}),(0,Z.jsx)(T.Z.Prev,{onClick:function(){return s(Math.max(t-1,1))},disabled:o}),h.map((function(e,n){return"..."===e?(0,Z.jsx)(T.Z.Ellipsis,{},n):(0,Z.jsx)(T.Z.Item,{active:e===t,onClick:function(){return s(e)},children:e},n)})),(0,Z.jsx)(T.Z.Next,{onClick:function(){return s(Math.min(t+1,n))},disabled:u}),(0,Z.jsx)(T.Z.Last,{onClick:function(){return s(n)},disabled:u})]})})}function $(){var e=(0,s.v9)(d),t=(0,s.v9)(l),n=(0,s.v9)(u),i=(0,s.v9)(o),h=(0,c.$G)().t,x=(0,s.I0)();(0,a.useEffect)((function(){x((0,j.Td)({page:e,query:n}))}),[x,e,n,i]);return(0,Z.jsxs)(r.B6,{children:[(0,Z.jsx)(r.ql,{children:(0,Z.jsx)("title",{children:h("helmet_title_todos_page")})}),(0,Z.jsxs)("div",{className:"d-flex flex-column min-vh-100",children:[(0,Z.jsx)(I,{}),(0,Z.jsx)("h1",{className:"mb-3 pt-5 text-center",children:h("title_list_todo")}),(0,Z.jsxs)("div",{className:"d-flex flex-wrap",children:[(0,Z.jsx)(M,{filter:n,page:e}),(0,Z.jsx)(G,{})]}),(0,Z.jsx)(y,{}),(0,Z.jsx)(E,{page:e,totalPages:t,handlePageChange:function(e){x((0,F.YA)(e)),x((0,j.Td)({page:e,query:n}))}})]})]})}}}]);
//# sourceMappingURL=639.eef5b824.chunk.js.map