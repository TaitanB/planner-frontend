"use strict";(self.webpackChunkplanner_frontend=self.webpackChunkplanner_frontend||[]).push([[425],{7425:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var c=n(2791),r=n(9434),o=n(3433),s=n(9439),i=n(3360),a=n(8949),d=n(9230),l=n(6355),u=n(3329),h=function(e){var t=e.isAccordionOpen;return(0,u.jsx)(i.Z,{variant:"outline-primary",className:"position-absolute bottom-0 end-0 scroll-to-top-button me-3 ".concat(t?"visible":"invisible"),onClick:function(){window.scrollTo({top:0,behavior:"smooth"})},children:(0,u.jsx)(l.ZTc,{className:"scroll-to-top-icon"})})},p=n(632),f=n(4289),x=n(3402),v=n(6856),m=n(9126),j=n(7873),b=n(2576),Z=n(241),g=n(3996);function y(e){var t=e.handleSubmit,n=e.descriptionUpdate,c=e.handleChange,r=e.description,o=e.reset,s=(0,d.$G)().t;return(0,u.jsxs)(Z.Z,{onSubmit:t,children:[(0,u.jsx)(Z.Z.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:(0,u.jsx)(Z.Z.Control,{as:"textarea",rows:3,type:"text",name:"description",value:n,onChange:c})}),(0,u.jsx)(i.Z,{className:"me-3",variant:"primary",type:"submit",disabled:n===r,children:s("update_todo")}),(0,u.jsx)(i.Z,{variant:"secondary",onClick:function(){return o()},children:s("cancel")})]})}var _=n(878),w=n(3528),C=n.n(w);function N(e){var t=(0,c.useState)(null),n=(0,s.Z)(t,2),r=n[0],o=n[1];return(0,c.useEffect)((function(){if(e){var t=C().tz.guess(),n=C()(e).tz(t).format("DD.MM.YYYY");o(n)}}),[e]),r}var k=function(e){var t=e._id,n=e.title,o=e.description,l=e.createdAt,h=e.updatedAt,p=e.plannedDate,w=e.completedDate,C=e.overdueDate,k=e.archivedDate,D=(0,c.useState)(!1),P=(0,s.Z)(D,2),E=P[0],I=P[1],S=(0,c.useState)(o),T=(0,s.Z)(S,2),A=T[0],L=T[1],Y=(0,r.I0)(),q=(0,d.$G)().t,z=null,B=null!==w,F=null!==C,G=null!==k,O=(0,r.v9)(f.Uv),U=null!==z,$=O.includes(t),K=(0,_.Z)(),M=N(l),R=N(h),H=N(p),J=N(w),V=N(C),W=N(k),Q=N(z),X=function(e,t){e.target.blur(),function(e){Y((0,g.$k)(e)),z=new Date,B?x.ZP.success("".concat(q("todo_not_completed"))):x.ZP.success("".concat(q("todo_completed")))}(t)},ee=function(e){!function(e){Y((0,g.RH)(e)),G?x.ZP.success("".concat(q("del_to_archive"))):x.ZP.success("".concat(q("added_to_archive")))}(e)};return(0,u.jsxs)(a.Z.Item,{eventKey:t,children:[(0,u.jsxs)("div",{className:"d-flex gap-3 align-items-center px-3",children:[!F&&(0,u.jsx)(j.Z,{placement:"top",overlay:(0,u.jsx)(b.Z,{children:q("is_completed")}),children:(0,u.jsx)(Z.Z.Check,{"aria-label":"option 1",id:"toggle-check-".concat(t),type:"checkbox",variant:"outline-primary",checked:B,disabled:!0===E,value:"1",onChange:function(e){return X(e,t)}})}),F&&(0,u.jsx)(j.Z,{placement:"top",overlay:(0,u.jsx)(b.Z,{children:q("overdue")}),children:(0,u.jsx)(Z.Z.Check,{isInvalid:!0,defaultChecked:!0,type:"radio",id:"toggle-check-".concat(t)})}),!F&&!B&&(0,u.jsx)(j.Z,{placement:"top",overlay:(0,u.jsx)(b.Z,{children:q("priority?")}),children:(0,u.jsx)(Z.Z.Check,{id:"priority-check-".concat(t),type:"checkbox",isValid:!0,checked:$,variant:"outline-primary",disabled:!0===E,onChange:function(){return function(e){Y((0,g.qK)(e)),$?x.ZP.success("".concat(q("delete_priority"))):x.ZP.success("".concat(q("add_priority")))}(t)}})}),(0,u.jsx)(a.Z.Header,{className:"w-100",children:K?(0,u.jsx)(j.Z,{placement:"top",overlay:(0,u.jsx)(b.Z,{children:n}),children:(0,u.jsx)("h5",{className:"w-100 mb-0 text-truncate custom-accordion-header",children:n})}):(0,u.jsx)("h5",{className:"w-100 mb-0 text-truncate custom-accordion-header",children:n})}),B||F?(0,u.jsx)(j.Z,{placement:"top",overlay:(0,u.jsx)(b.Z,{children:"".concat(q(G&&F?"refresh":"add_to_archive"))}),children:(0,u.jsx)(i.Z,{disabled:G&&B,className:"ms-auto btn ".concat(G&&F?"btn-primary":"btn-success"," ").concat(G&&B&&"btn-warning"),type:"button",onClick:function(){return ee(t)},children:G&&F?(0,u.jsx)(v.Ffb,{}):(0,u.jsx)(m.JNM,{})},"archive-".concat(t))}):(0,u.jsx)(j.Z,{placement:"top",overlay:(0,u.jsx)(b.Z,{children:"".concat(q("delete"))}),children:(0,u.jsx)(i.Z,{disabled:E,className:"ms-auto btn btn-danger",type:"button",onClick:function(){return function(e){Y((0,g.uv)(e)),x.ZP.success("".concat(q("todo_deleted")))}(t)},children:(0,u.jsx)(v.I0,{})})})]}),(0,u.jsx)(a.Z.Body,{className:"p-3",onExited:function(){return I(!1)},children:E?(0,u.jsx)(y,{handleSubmit:function(e){e.preventDefault(),Y((0,g.Lo)({_id:t,description:A})),x.ZP.success("".concat(q("todo_update"))),I(!1)},descriptionUpdate:A,handleChange:function(e){var t=e.currentTarget,n=t.name,c=t.value;if("description"===n)L(c)},description:o,reset:function(){I(!1),L(o)}}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{className:"mb-3 border rounded p-2",children:o}),(0,u.jsxs)("div",{className:"d-flex flex-wrap gap-3 align-items-center",children:[(0,u.jsxs)("div",{children:[q("created"),": ",(0,u.jsx)("b",{children:M})]}),(0,u.jsxs)("div",{children:[q("updated"),": ",(0,u.jsxs)("b",{children:[" ",R]})]}),(0,u.jsxs)("div",{children:[q("planned_date"),": ",(0,u.jsxs)("b",{children:[" ",H]})]}),!F&&(0,u.jsxs)("div",{className:B?"text-success":"",children:[q("completed"),":",(0,u.jsxs)("b",{children:[" ",B?J:"??.??.????"]})]}),F&&(0,u.jsxs)("div",{className:"text-danger",children:[q("overdue"),": ",(0,u.jsx)("b",{children:V})]}),U&&(0,u.jsxs)("div",{className:"text-primary",children:[q("is_refresh"),": ",(0,u.jsx)("b",{children:Q})]}),G&&(0,u.jsxs)("div",{className:"text-warning",children:[q("archived"),": ",(0,u.jsx)("b",{children:W})]}),!F&&(0,u.jsx)(j.Z,{placement:"top",overlay:(0,u.jsx)(b.Z,{children:"".concat(q("edit"))}),children:(0,u.jsx)(i.Z,{disabled:B,className:"ms-auto btn btn-primary",type:"button",onClick:function(){return I(!0)},children:(0,u.jsx)(v.z8Y,{})})})]})]})})]})},D=n(3524),P=function(e){var t=e.statusTodo,n=(0,c.useState)([]),l=(0,s.Z)(n,2),x=l[0],v=l[1],m=(0,c.useState)(!1),j=(0,s.Z)(m,2),b=j[0],Z=j[1],y=(0,d.$G)().t,_=(0,r.I0)(),w=(0,r.v9)(p.fx),C=(0,r.v9)(p.uP),N=(0,r.v9)(p.jl),P=t,E=(0,r.v9)(p.ql),I=(0,r.v9)(f.Uv),S=E;(0,c.useEffect)((function(){console.log("TodosList useEffect"),console.log(P),P===D.sB.PRIORITY?_((0,g.a9)({page:w,query:C})):_((0,g.Td)({page:w,query:C,status:P}))}),[_,w,C,N,I,P]),(0,c.useEffect)((function(e){!e&&Z(!1),v([])}),[S]);return(0,u.jsxs)("div",{className:"mb-3 pb-5 position-relative d-flex flex-column",children:[S&&S.length>0&&(0,u.jsx)(i.Z,{variant:"outline-primary",onClick:function(){!b&&x.length>0?S.forEach((function(e){var t=e._id;v((function(e){return e.includes(t)?e:[].concat((0,o.Z)(e),[t])}))})):b?v([]):S.forEach((function(e){var t=e._id;v((function(e){return[].concat((0,o.Z)(e),[t])}))})),Z((function(e){return!e}))},className:"position-absolute bottom-0 start-0 ms-3",children:"".concat(y(b?"is_accordion_close":"is_accordion_open"))}),(0,u.jsx)(h,{isAccordionOpen:b}),S&&0!==S.length?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(a.Z,{flush:!0,alwaysOpen:!0,activeKey:x,onSelect:function(e){v((function(t){return t.includes(e)?t.filter((function(t){return t!==e})):e})),S.length-1===x.length&&Z((function(e){return!e}))},className:"border",children:S.map((function(e){var t=e._id,n=e.title,c=e.description,r=e.createdAt,o=e.updatedAt,s=e.plannedDate,i=e.completedDate,a=e.overdueDate,d=e.archivedDate;return(0,u.jsx)(k,{_id:t,title:n,description:c,createdAt:r,updatedAt:o,plannedDate:s,completedDate:i,overdueDate:a,archivedDate:d},t)}))})}):(0,u.jsx)("div",{className:"text-center py-5 border rounded bs-accordion-bg",children:(0,u.jsx)("p",{children:y("no_todos_text")})})]})};function E(){var e=(0,r.v9)(p.IB);return(0,u.jsx)(P,{statusTodo:e})}},878:function(e,t,n){var c=n(9439),r=n(2791);t.Z=function(){var e=(0,r.useState)(!1),t=(0,c.Z)(e,2),n=t[0],o=t[1];return(0,r.useEffect)((function(){var e=function(){o(window.innerWidth<=576)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),n}},632:function(e,t,n){n.d(t,{IB:function(){return i},fx:function(){return r},gc:function(){return c},jl:function(){return o},ql:function(){return a},uP:function(){return s}});var c=function(e){return e.todos.totalPages},r=function(e){return e.todos.page},o=function(e){return e.todos.totalTodos},s=function(e){return e.todos.search},i=function(e){return e.todos.status},a=function(e){return e.todos.search?e.todos.items.filter((function(t){var n=t.title,c=t.description;return n.toLowerCase().includes(e.todos.search.toLowerCase())||c.toLowerCase().includes(e.todos.search.toLowerCase())})):e.todos.items}}}]);
//# sourceMappingURL=425.852cf9ab.chunk.js.map