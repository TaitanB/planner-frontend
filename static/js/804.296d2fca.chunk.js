"use strict";(self.webpackChunkplanner_frontend=self.webpackChunkplanner_frontend||[]).push([[804],{5804:function(e,t,n){n.r(t),n.d(t,{default:function(){return q}});var a=n(2791),s=n(9434),c=n(6907),i=n(9230),r=n(3433),o=n(9439),l=n(3360),d=n(8949),u=n(6355),h=n(3329),p=function(e){var t=e.isAccordionOpen;return(0,h.jsx)(l.Z,{variant:"outline-primary",className:"position-absolute bottom-0 end-0 scroll-to-top-button me-3 ".concat(t?"visible":"invisible"),onClick:function(){window.scrollTo({top:0,behavior:"smooth"})},children:(0,h.jsx)(u.ZTc,{className:"scroll-to-top-icon"})})},x=function(e){return e.todos.totalPages},m=function(e){return e.todos.page},f=function(e){return e.todos.totalTodos},j=function(e){return e.todos.filter},v=function(e){return e.todos.filter?e.todos.items.filter((function(t){var n=t.title,a=t.description;return n.toLowerCase().includes(e.todos.filter.toLowerCase())||a.toLowerCase().includes(e.todos.filter.toLowerCase())})):e.todos.items},b=n(3402),g=n(6856),Z=n(9126),_=n(2222),w=function(e){if(e){var t=e.slice(0,10).split("-"),n=(0,o.Z)(t,3),a=n[0],s=n[1],c=n[2];return"".concat(c,".").concat(s,".").concat(a)}},y=n(3027);function C(e){var t=e.handleSubmit,n=e.descriptionUpdate,a=e.handleChange,s=e.description,c=e.reset,r=(0,i.$G)().t;return(0,h.jsxs)(y.Z,{onSubmit:t,children:[(0,h.jsx)(y.Z.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:(0,h.jsx)(y.Z.Control,{as:"textarea",rows:3,type:"text",name:"description",value:n,onChange:a})}),(0,h.jsx)(l.Z,{className:"me-3",variant:"primary",type:"submit",disabled:n===s,children:r("update_todo")}),(0,h.jsx)(l.Z,{variant:"secondary",onClick:function(){return c()},children:r("cancel")})]})}var k=function(e){var t=e._id,n=e.title,c=e.description,r=e.createdAt,u=e.updatedAt,p=e.plannedDate,x=e.completedDate,m=e.overdueDate,f=(0,a.useState)(!1),j=(0,o.Z)(f,2),v=j[0],k=j[1],D=(0,a.useState)(c),N=(0,o.Z)(D,2),S=N[0],P=N[1],I=localStorage.getItem("selectedLanguage"),F=(0,s.I0)(),L=(0,i.$G)().t,A=null!==x,E=null!==m;(0,a.useEffect)((function(){Array.from(document.querySelectorAll('[data-bs-toggle="tooltip"]')).forEach((function(e){new window.bootstrap.Tooltip(e)}))}),[I]);var M=function(e,t){e.target.blur(),function(e){F((0,_.$k)(e)),A?b.ZP.success("".concat(L("todo_not_completed"))):b.ZP.success("".concat(L("todo_completed")))}(t)};return(0,h.jsxs)(d.Z.Item,{eventKey:t,children:[(0,h.jsxs)("div",{className:"d-flex gap-3 align-items-center px-3",children:[!E&&(0,h.jsx)(y.Z.Check,{"data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-title":"".concat(L("is_completed")),"aria-label":"option 1",id:"toggle-check-".concat(t),type:"checkbox",variant:"outline-primary",checked:A,disabled:!0===v,value:"1",onChange:function(e){return M(e,t)}}),E&&(0,h.jsx)(y.Z.Check,{"data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-title":"".concat(L("is_overdue")),isInvalid:!0,defaultChecked:!0,type:"radio",id:"toggle-check-".concat(t)}),(0,h.jsx)(d.Z.Header,{className:"w-100",children:(0,h.jsx)("h5",{"data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-title":n,className:"w-100 mb-0 text-truncate custom-accordion-header",children:n})}),A||E?(0,h.jsx)(l.Z,{"data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-title":"".concat(L("add_to_archive")),className:"ms-auto btn btn-success",type:"button",children:(0,h.jsx)(Z.JNM,{})},"archive-".concat(t)):(0,h.jsx)(l.Z,{"data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-title":"".concat(L("delete")),disabled:v,className:"ms-auto btn btn-danger",type:"button",onClick:function(){return function(e){F((0,_.uv)(e)),b.ZP.success("".concat(L("todo_deleted")))}(t)},children:(0,h.jsx)(g.I0,{})})]}),(0,h.jsx)(d.Z.Body,{className:"p-3",onExited:function(){return k(!1)},children:v?(0,h.jsx)(C,{handleSubmit:function(e){e.preventDefault(),F((0,_.Lo)({_id:t,description:S})),b.ZP.success("".concat(L("todo_update"))),k(!1)},descriptionUpdate:S,handleChange:function(e){var t=e.currentTarget,n=t.name,a=t.value;if("description"===n)P(a)},description:c,reset:function(){k(!1),P(c)}}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("p",{className:"mb-3",children:c}),(0,h.jsxs)("div",{className:"d-flex flex-wrap gap-3 align-items-center",children:[(0,h.jsxs)("div",{children:[L("created"),": ",(0,h.jsx)("b",{children:w(r)})]}),(0,h.jsxs)("div",{children:[L("updated"),": ",(0,h.jsxs)("b",{children:[" ",w(u)]})]}),(0,h.jsxs)("div",{children:[L("planned_date"),": ",(0,h.jsxs)("b",{children:[" ",w(p)]})]}),null===m&&(0,h.jsxs)("div",{className:A?"text-success":"",children:[L("completed"),":",(0,h.jsxs)("b",{children:[" ",A?w(x):"??.??.????"]})]}),E&&(0,h.jsxs)("div",{className:"text-danger",children:[L("is_overdue"),": ",(0,h.jsx)("b",{children:w(m)})]}),(0,h.jsx)(l.Z,{"data-bs-title":"".concat(L("edit")),disabled:A||E,className:"ms-auto btn btn-primary",type:"button",onClick:function(){return k(!0)},children:(0,h.jsx)(g.z8Y,{})})]})]})})]})},D=function(){var e=(0,a.useState)([]),t=(0,o.Z)(e,2),n=t[0],c=t[1],u=(0,a.useState)(!1),x=(0,o.Z)(u,2),m=x[0],f=x[1],j=(0,s.v9)(v),b=(0,i.$G)().t;(0,a.useEffect)((function(e){!e&&f(!1),c([])}),[j]);return(0,h.jsxs)("div",{className:"mb-3 pb-5 position-relative",children:[(0,h.jsx)(l.Z,{variant:"outline-primary",onClick:function(){!m&&n.length>0?j.forEach((function(e){var t=e._id;c((function(e){return e.includes(t)?e:[].concat((0,r.Z)(e),[t])}))})):m?c([]):j.forEach((function(e){var t=e._id;c((function(e){return[].concat((0,r.Z)(e),[t])}))})),f((function(e){return!e}))},className:"position-absolute bottom-0 start-0",children:"".concat(b(m?"is_accordion_close":"is_accordion_open"))}),(0,h.jsx)(p,{isAccordionOpen:m}),0!==j.length?(0,h.jsx)(d.Z,{alwaysOpen:!0,activeKey:n,onSelect:function(e){c((function(t){return t.includes(e)?t.filter((function(t){return t!==e})):e})),j.length-1===n.length&&f((function(e){return!e}))},children:j.map((function(e){var t=e._id,n=e.title,a=e.description,s=e.createdAt,c=e.updatedAt,i=e.plannedDate,r=e.completedDate,o=e.overdueDate;return(0,h.jsx)(k,{_id:t,title:n,description:a,createdAt:s,updatedAt:c,plannedDate:i,completedDate:r,overdueDate:o},t)}))}):(0,h.jsx)("div",{className:"text-center py-5 border rounded bs-accordion-bg",children:(0,h.jsx)("p",{children:b("no_todos_text")})})]})},N=n(9513),S=n.n(N);n(8639);var P=function(e){var t=e.selectedPeriod,n=e.setPlannedDate,s=(0,a.useState)(null),c=(0,o.Z)(s,2),i=c[0],r=c[1];return(0,a.useEffect)((function(){"date"!==t&&r(null)}),[t]),(0,h.jsxs)("div",{className:"d-flex gap-1 align-items-center ".concat("date"===t&&"text-primary"),children:[(0,h.jsx)(g.sHf,{}),(0,h.jsx)(S(),{selected:i,onChange:function(e){r(e),n(e)},className:"w-100 text-center"})]})},I=n(3524),F=function(e){var t,n=e.text,a=e.plannedDate,s=new Date;switch(n){case"week":t=new Date(s.getTime()+6048e5);break;case"month":t=new Date(s.getFullYear(),s.getMonth()+1,s.getDate());break;case"3_months":t=new Date(s.getFullYear(),s.getMonth()+3,s.getDate());break;case"half_year":t=new Date(s.getFullYear(),s.getMonth()+6,s.getDate());break;case"year":t=new Date(s.getFullYear()+1,s.getMonth(),s.getDate());break;case"3_years":t=new Date(s.getFullYear()+3,s.getMonth(),s.getDate());break;case"5_years":t=new Date(s.getFullYear()+5,s.getMonth(),s.getDate());break;case"date":t=a}return console.log(t),t};function L(e){var t=e.plannedDate,n=e.setPlannedDate,a=e.selectedPeriod,s=e.setSelectedPeriod,c=(0,i.$G)().t;return(0,h.jsxs)("div",{className:"d-flex flex-wrap gap-3 align-items-center",children:[I.F.map((function(e){return(0,h.jsx)(y.Z.Check,{style:{width:"122px"},checked:a===e,label:"".concat(c(e)),name:"plannedDate",type:"radio",id:"inline-radio-".concat(e),onChange:function(){s(e),n(F({text:e,plannedDate:t}))}},"".concat(c(e)))})),(0,h.jsxs)(y.Z.Label,{children:[(0,h.jsx)(y.Z.Check,{checked:"date"===a,inline:!0,name:"plannedDate",type:"radio",className:"btn-check",id:"inline-radio-date",onChange:function(){var e="date";s(e),n(F({text:e,plannedDate:t}))}},"date"),(0,h.jsx)(P,{selectedPeriod:a,setPlannedDate:n})]})]})}function A(){var e=(0,a.useState)(""),t=(0,o.Z)(e,2),n=t[0],c=t[1],r=(0,a.useState)(""),u=(0,o.Z)(r,2),p=u[0],x=u[1],m=(0,a.useState)(""),f=(0,o.Z)(m,2),j=f[0],v=f[1],g=(0,a.useState)(""),Z=(0,o.Z)(g,2),w=Z[0],C=Z[1],k=(0,a.useState)(null),D=(0,o.Z)(k,2),N=D[0],S=D[1],P=(0,i.$G)().t,I=(0,s.I0)(),F=function(e){var t=e.currentTarget,n=t.name,a=t.value;switch(n){case"title":c(a);break;case"description":x(a)}},A=function(){c(""),x(""),v(""),C("")};return(0,h.jsx)(d.Z,{activeKey:N,onSelect:function(e){S(e)},children:(0,h.jsxs)(d.Z.Item,{eventKey:"0",children:[(0,h.jsx)(d.Z.Header,{children:(0,h.jsx)("h3",{className:"mb-0 ms-auto ",children:P("form_add_todo_title")})}),(0,h.jsx)(d.Z.Body,{children:(0,h.jsxs)(y.Z,{onSubmit:function(e){e.preventDefault(),console.log(j),I((0,_.Iv)({title:n,description:p,plannedDate:j})),b.ZP.success("".concat(P("todo_added"))),A()},children:[(0,h.jsxs)(y.Z.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,h.jsx)(y.Z.Label,{visuallyHidden:!0,children:P("title_todo")}),(0,h.jsx)(y.Z.Control,{type:"text",name:"title",required:!0,value:n,onChange:F,placeholder:P("placeholder_title")})]}),(0,h.jsxs)(y.Z.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[(0,h.jsx)(y.Z.Label,{visuallyHidden:!0,children:P("description")}),(0,h.jsx)(y.Z.Control,{as:"textarea",rows:6,type:"text",name:"description",value:p,onChange:F,placeholder:P("placeholder_description")})]}),(0,h.jsxs)("div",{className:"d-flex flex-wrap mb-3",children:[(0,h.jsxs)("h5",{className:"d-inline-block me-3 mb-3",children:["".concat(P("planned_date")),":"]}),(0,h.jsx)(L,{plannedDate:j,setPlannedDate:v,selectedPeriod:w,setSelectedPeriod:C})]},"inline-radio"),(0,h.jsx)(l.Z,{className:"me-3",variant:"primary",type:"submit",disabled:!n||!p||!w,children:P("add_todo")}),(0,h.jsx)(l.Z,{variant:"secondary",onClick:function(){A(),"0"===N&&S(null)},children:P("cancel")})]})})]})})}var E=n(473),M=n(2227),G=function(){var e=(0,a.useState)(""),t=(0,o.Z)(e,2),n=t[0],c=t[1],r=(0,i.$G)().t,d=(0,s.I0)();return(0,h.jsx)(y.Z,{className:"d-flex mb-3",children:(0,h.jsxs)(y.Z.Label,{className:"mb-0 d-flex align-items-center",children:[(0,h.jsx)(y.Z.Control,{type:"text",name:n,value:n,onChange:function(e){return c(e.target.value)},placeholder:r("placeholder_search"),className:"me-2","aria-label":"Search"}),(0,h.jsx)(l.Z,{onClick:function(){console.log(n),d((0,M.zK)(n))},variant:"outline-primary me-2",children:r("placeholder_search")}),(0,h.jsx)(E.Z,{onClick:function(e){e.target.blur(),d((0,M.Dg)()),c("")}})]})})},T=function(){var e=(0,s.v9)(f),t=(0,s.v9)(x),n=(0,i.$G)().t;return(0,h.jsxs)("div",{className:"d-flex flex-wrap gap-3 align-items-center mb-3 ms-auto",children:[(0,h.jsxs)("div",{children:[n("all_todos"),": ",(0,h.jsx)("b",{children:e})]}),(0,h.jsxs)("div",{children:[n("page"),": ",(0,h.jsx)("b",{children:t})]}),(0,h.jsxs)("div",{children:[n("completed"),": ",(0,h.jsx)("b",{children:"0"})]}),(0,h.jsxs)("div",{children:[n("is_overdue"),": ",(0,h.jsx)("b",{children:"0"})]}),(0,h.jsxs)("div",{children:[n("archive"),": ",(0,h.jsx)("b",{children:"0"})]})]})},$=n(8116);function Y(e){var t=e.page,n=e.totalPages,s=e.handlePageChange,c=(0,a.useState)(5),i=(0,o.Z)(c,2),l=i[0],d=i[1],u=function(){window.innerWidth<425?d(1):window.innerWidth<576?d(3):window.innerWidth<992?d(5):d(7)};(0,a.useEffect)((function(){return u(),window.addEventListener("resize",u),function(){window.removeEventListener("resize",u)}}),[]);var p=1===t,x=t===n,m=function(){if(n<=l)return(0,r.Z)(Array(n)).map((function(e,t){return t+1}));var e=Math.floor(l/2),a=Math.max(t-e,1),s=Math.min(t+e,n);t<=e?s=l:t>n-e&&(a=n-l+1);var c=[];1!==a&&(c.push(1),2!==a&&c.push("..."));for(var i=a;i<=s;i++)c.push(i);return s!==n&&(s!==n-1&&c.push("..."),c.push(n)),c}();return(0,h.jsx)(h.Fragment,{children:n>1&&(0,h.jsxs)($.Z,{className:"mx-auto mb-5",children:[(0,h.jsx)($.Z.First,{onClick:function(){return s(1)},disabled:p}),(0,h.jsx)($.Z.Prev,{onClick:function(){return s(Math.max(t-1,1))},disabled:p}),m.map((function(e,n){return"..."===e?(0,h.jsx)($.Z.Ellipsis,{},n):(0,h.jsx)($.Z.Item,{active:e===t,onClick:function(){return s(e)},children:e},n)})),(0,h.jsx)($.Z.Next,{onClick:function(){return s(Math.min(t+1,n))},disabled:x}),(0,h.jsx)($.Z.Last,{onClick:function(){return s(n)},disabled:x})]})})}function q(){var e=(0,s.v9)(m),t=(0,s.v9)(x),n=(0,s.v9)(j),r=(0,s.v9)(f),o=(0,i.$G)().t,l=(0,s.I0)();(0,a.useEffect)((function(){l((0,_.Td)({page:e,query:n}))}),[l,e,n,r]);return(0,h.jsxs)(c.B6,{children:[(0,h.jsx)(c.ql,{children:(0,h.jsx)("title",{children:o("helmet_title_todos_page")})}),(0,h.jsxs)("div",{className:"d-flex flex-column mt-5 pt-5",children:[(0,h.jsx)(A,{}),(0,h.jsx)("h1",{className:"mb-3 pt-5 text-center",children:o("title_list_todo")}),(0,h.jsxs)("div",{className:"d-flex flex-wrap",children:[(0,h.jsx)(G,{filter:n,page:e}),(0,h.jsx)(T,{})]}),(0,h.jsx)(D,{}),(0,h.jsx)(Y,{page:e,totalPages:t,handlePageChange:function(e){l((0,M.YA)(e)),l((0,_.Td)({page:e,query:n}))}})]})]})}}}]);
//# sourceMappingURL=804.296d2fca.chunk.js.map