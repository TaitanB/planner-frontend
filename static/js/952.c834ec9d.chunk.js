"use strict";(self.webpackChunkplanner_frontend=self.webpackChunkplanner_frontend||[]).push([[952],{7952:function(e,t,n){n.r(t),n.d(t,{default:function(){return Y}});var a=n(2791),s=n(9434),r=n(6907),c=n(9230),l=n(8949),i=function(e){return e.todos.totalPages},d=function(e){return e.todos.page},o=function(e){return e.todos.totalTodos},u=function(e){return e.todos.filter},h=function(e){return e.todos.filter?e.todos.items.filter((function(t){var n=t.title,a=t.description;return n.toLowerCase().includes(e.todos.filter.toLowerCase())||a.toLowerCase().includes(e.todos.filter.toLowerCase())})):e.todos.items},p=n(1413),x=n(9439),m=n(3402),f=n(6856),j=n(9126),v=n(2222),b=function(e){if(e){var t=e.slice(0,10).split("-"),n=(0,x.Z)(t,3),a=n[0],s=n[1],r=n[2];return"".concat(r,".").concat(s,".").concat(a)}},g=n(3027),Z=n(3360),_=n(3329);function w(e){var t=e.handleSubmit,n=e.descriptionUpdate,a=e.handleChange,s=e.description,r=e.reset,l=(0,c.$G)().t;return(0,_.jsxs)(g.Z,{onSubmit:t,children:[(0,_.jsx)(g.Z.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:(0,_.jsx)(g.Z.Control,{as:"textarea",rows:3,type:"text",name:"description",value:n,onChange:a})}),(0,_.jsx)(Z.Z,{className:"me-3",variant:"primary",type:"submit",disabled:n===s,children:l("update_todo")}),(0,_.jsx)(Z.Z,{variant:"secondary",onClick:function(){return r()},children:l("cancel")})]})}var y=function(e){var t=e._id,n=e.title,r=e.description,i=e.createdAt,d=e.updatedAt,o=e.plannedDate,u=e.completedDate,y=e.overdueDate,C=(0,a.useState)({}),D=(0,x.Z)(C,2),k=D[0],N=D[1],P=(0,a.useState)(!1),S=(0,x.Z)(P,2),I=S[0],L=S[1],F=(0,a.useState)(r),M=(0,x.Z)(F,2),T=M[0],A=M[1],E=localStorage.getItem("selectedLanguage"),G=(0,s.I0)(),Y=(0,c.$G)().t,$=(0,s.v9)(h);(0,a.useEffect)((function(){if(0!==$.length){var e=$.reduce((function(e,t){return null!==t.completedDate&&(e[t._id]=!0),e}),{});N(e)}}),[$]),(0,a.useEffect)((function(){Array.from(document.querySelectorAll('[data-bs-toggle="tooltip"]')).forEach((function(e){new window.bootstrap.Tooltip(e)}))}),[E]);var q=k[t]||!1,H=function(e,t){e.target.blur();var n=(0,p.Z)({},k);n[t]=e.currentTarget.checked,N(n),function(e){G((0,v.$k)(e)),q?m.ZP.success("".concat(Y("todo_not_completed"))):m.ZP.success("".concat(Y("todo_completed")))}(t)};return(0,_.jsxs)(l.Z.Item,{eventKey:t,children:[(0,_.jsxs)("div",{className:"d-flex gap-3 align-items-center px-3",children:[null===y&&(0,_.jsx)(g.Z.Check,{"data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-title":"".concat(Y("is_completed")),"aria-label":"option 1",id:"toggle-check-".concat(t),type:"checkbox",variant:"outline-primary",checked:q,disabled:!0===I,value:"1",onChange:function(e){return H(e,t)}}),null!==y&&(0,_.jsx)(g.Z.Check,{"data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-title":"".concat(Y("is_overdue")),isInvalid:!0,defaultChecked:!0,type:"radio",id:"toggle-check-".concat(t)}),(0,_.jsx)(l.Z.Header,{className:"w-100",children:(0,_.jsx)("h5",{"data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-title":n,className:"w-100 mb-0 text-truncate custom-accordion-header",children:n})}),q||null!==y?(0,_.jsx)(Z.Z,{"data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-title":"".concat(Y("add_to_archive")),className:"ms-auto btn btn-success",type:"button",children:(0,_.jsx)(j.JNM,{})},"archive-".concat(t)):(0,_.jsx)(Z.Z,{"data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-title":"".concat(Y("delete")),disabled:I,className:"ms-auto btn btn-danger",type:"button",onClick:function(){return function(e){G((0,v.uv)(e)),m.ZP.success("".concat(Y("todo_deleted")))}(t)},children:(0,_.jsx)(f.I0,{})})]}),(0,_.jsx)(l.Z.Body,{className:"p-3",onExited:function(){return L(!1)},children:I?(0,_.jsx)(w,{handleSubmit:function(e){e.preventDefault(),G((0,v.Lo)({_id:t,description:T})),m.ZP.success("".concat(Y("todo_update"))),L(!1)},descriptionUpdate:T,handleChange:function(e){var t=e.currentTarget,n=t.name,a=t.value;if("description"===n)A(a)},description:r,reset:function(){L(!1),A(r)}}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("p",{className:"mb-3",children:r}),(0,_.jsxs)("div",{className:"d-flex flex-wrap gap-3 align-items-center",children:[(0,_.jsxs)("div",{children:[Y("created"),": ",(0,_.jsx)("b",{children:b(i)})]}),(0,_.jsxs)("div",{children:[Y("updated"),": ",(0,_.jsxs)("b",{children:[" ",b(d)]})]}),(0,_.jsxs)("div",{children:[Y("planned_date"),": ",(0,_.jsxs)("b",{children:[" ",b(o)]})]}),null===y&&(0,_.jsxs)("div",{className:q?"text-success":"",children:[Y("completed"),":",(0,_.jsxs)("b",{children:[" ",q?b(u):"??.??.????"]})]}),null!==y&&(0,_.jsxs)("div",{className:"text-danger",children:[Y("is_overdue"),": ",(0,_.jsx)("b",{children:b(y)})]}),(0,_.jsx)(Z.Z,{"data-bs-title":"".concat(Y("edit")),disabled:q||null!==y,className:"ms-auto btn btn-primary",type:"button",onClick:function(){return L(!0)},children:(0,_.jsx)(f.z8Y,{})})]})]})})]})},C=function(){var e=(0,s.v9)(h),t=(0,s.v9)(o),n=(0,s.v9)(i),a=(0,c.$G)().t;return(0,_.jsxs)("div",{className:"mb-5",children:[(0,_.jsxs)("div",{className:"d-flex flex-wrap gap-3 align-items-center mb-3",children:[(0,_.jsxs)("div",{children:[a("all_todos"),": ",(0,_.jsx)("b",{children:t})]}),(0,_.jsxs)("div",{children:[a("page"),": ",(0,_.jsx)("b",{children:n})]}),(0,_.jsxs)("div",{children:[a("completed"),": ",(0,_.jsx)("b",{children:"0"})]}),(0,_.jsxs)("div",{children:[a("is_overdue"),": ",(0,_.jsx)("b",{children:"0"})]}),(0,_.jsxs)("div",{children:[a("archive"),": ",(0,_.jsx)("b",{children:"0"})]})]}),0!==e.length?(0,_.jsx)(l.Z,{alwaysOpen:!0,children:e.map((function(e){var t=e._id,n=e.title,a=e.description,s=e.createdAt,r=e.updatedAt,c=e.plannedDate,l=e.completedDate,i=e.overdueDate;return(0,_.jsx)(y,{_id:t,title:n,description:a,createdAt:s,updatedAt:r,plannedDate:c,completedDate:l,overdueDate:i},t)}))}):(0,_.jsx)("div",{className:"text-center py-5 border rounded bs-accordion-bg",children:(0,_.jsx)("p",{children:a("no_todos_text")})})]})},D=n(9513),k=n.n(D);n(8639);var N=function(e){var t=e.selectedPeriod,n=e.setPlannedDate,s=(0,a.useState)(null),r=(0,x.Z)(s,2),c=r[0],l=r[1];return(0,a.useEffect)((function(){"date"!==t&&l(null)}),[t]),(0,_.jsxs)("div",{className:"d-flex gap-1 align-items-center ".concat("date"===t&&"text-primary"),children:[(0,_.jsx)(f.sHf,{}),(0,_.jsx)(k(),{selected:c,onChange:function(e){l(e),n(e)},className:"w-100 text-center"})]})},P=["week","month","3_months","half_year","year","3_years","5_years"],S=function(e){var t,n=e.text,a=e.plannedDate,s=new Date;switch(n){case"week":t=new Date(s.getTime()+6048e5);break;case"month":t=new Date(s.getFullYear(),s.getMonth()+1,s.getDate());break;case"3_months":t=new Date(s.getFullYear(),s.getMonth()+3,s.getDate());break;case"half_year":t=new Date(s.getFullYear(),s.getMonth()+6,s.getDate());break;case"year":t=new Date(s.getFullYear()+1,s.getMonth(),s.getDate());break;case"3_years":t=new Date(s.getFullYear()+3,s.getMonth(),s.getDate());break;case"5_years":t=new Date(s.getFullYear()+5,s.getMonth(),s.getDate());break;case"date":t=a}return t};function I(e){var t=e.plannedDate,n=e.setPlannedDate,a=e.selectedPeriod,s=e.setSelectedPeriod,r=(0,c.$G)().t;return(0,_.jsxs)("div",{className:"d-flex flex-wrap gap-3 align-items-center",children:[P.map((function(e){return(0,_.jsx)(g.Z.Check,{style:{width:"122px"},checked:a===e,label:"".concat(r(e)),name:"plannedDate",type:"radio",id:"inline-radio-".concat(e),onChange:function(){s(e),n(S({text:e,plannedDate:t}))}},"".concat(r(e)))})),(0,_.jsxs)(g.Z.Label,{children:[(0,_.jsx)(g.Z.Check,{checked:"date"===a,inline:!0,name:"plannedDate",type:"radio",className:"btn-check",id:"inline-radio-date",onChange:function(){var e="date";s(e),n(S({text:e,plannedDate:t}))}},"date"),(0,_.jsx)(N,{selectedPeriod:a,setPlannedDate:n})]})]})}function L(){var e=(0,a.useState)(""),t=(0,x.Z)(e,2),n=t[0],r=t[1],i=(0,a.useState)(""),d=(0,x.Z)(i,2),o=d[0],u=d[1],h=(0,a.useState)(""),p=(0,x.Z)(h,2),f=p[0],j=p[1],b=(0,a.useState)(""),w=(0,x.Z)(b,2),y=w[0],C=w[1],D=(0,c.$G)().t,k=(0,s.I0)(),N=function(e){var t=e.currentTarget,n=t.name,a=t.value;switch(n){case"title":r(a);break;case"description":u(a)}},P=function(){r(""),u(""),j(""),C("")};return(0,_.jsx)(l.Z,{children:(0,_.jsxs)(l.Z.Item,{eventKey:"0",children:[(0,_.jsx)(l.Z.Header,{children:(0,_.jsx)("h3",{className:"mb-0 ms-auto ",children:D("form_add_todo_title")})}),(0,_.jsx)(l.Z.Body,{children:(0,_.jsxs)(g.Z,{onSubmit:function(e){e.preventDefault(),k((0,v.Iv)({title:n,description:o,plannedDate:f})),m.ZP.success("".concat(D("todo_added"))),P()},children:[(0,_.jsxs)(g.Z.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,_.jsx)(g.Z.Label,{visuallyHidden:!0,children:D("title_todo")}),(0,_.jsx)(g.Z.Control,{type:"text",name:"title",required:!0,value:n,onChange:N,placeholder:D("placeholder_title")})]}),(0,_.jsxs)(g.Z.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[(0,_.jsx)(g.Z.Label,{visuallyHidden:!0,children:D("description")}),(0,_.jsx)(g.Z.Control,{as:"textarea",rows:6,type:"text",name:"description",value:o,onChange:N,placeholder:D("placeholder_description")})]}),(0,_.jsxs)("div",{className:"d-flex flex-wrap mb-3",children:[(0,_.jsxs)("h5",{className:"d-inline-block me-3 mb-3",children:["".concat(D("planned_date")),":"]}),(0,_.jsx)(I,{plannedDate:f,setPlannedDate:j,selectedPeriod:y,setSelectedPeriod:C})]},"inline-radio"),(0,_.jsx)(Z.Z,{variant:"primary",type:"submit",children:D("add_todo")})]})})]})})}var F=n(473),M=n(2227),T=function(e){var t=e.filter,n=(0,s.v9)(u),a=(0,c.$G)().t,r=(0,s.I0)();return(0,_.jsx)(g.Z,{className:"d-flex mb-3",children:(0,_.jsxs)(g.Z.Label,{className:"mb-0 d-flex align-items-center",children:[(0,_.jsx)(g.Z.Control,{type:"text",name:t,value:n,onChange:function(e){var t=e.currentTarget.value;r((0,M.zK)(t))},placeholder:a("placeholder_search"),className:"me-2","aria-label":"Search"}),(0,_.jsx)(F.Z,{onClick:function(e){e.target.blur(),r((0,M.Dg)())}})]})})},A=n(3433),E=n(8116);function G(e){var t=e.page,n=e.totalPages,s=e.handlePageChange,r=(0,a.useState)(5),c=(0,x.Z)(r,2),l=c[0],i=c[1],d=function(){window.innerWidth<425?i(1):window.innerWidth<576?i(3):window.innerWidth<992?i(5):i(7)};(0,a.useEffect)((function(){return d(),window.addEventListener("resize",d),function(){window.removeEventListener("resize",d)}}),[]);var o=1===t,u=t===n,h=function(){if(n<=l)return(0,A.Z)(Array(n)).map((function(e,t){return t+1}));var e=Math.floor(l/2),a=Math.max(t-e,1),s=Math.min(t+e,n);t<=e?s=l:t>n-e&&(a=n-l+1);var r=[];1!==a&&(r.push(1),2!==a&&r.push("..."));for(var c=a;c<=s;c++)r.push(c);return s!==n&&(s!==n-1&&r.push("..."),r.push(n)),r}();return(0,_.jsx)(_.Fragment,{children:n>1&&(0,_.jsxs)(E.Z,{className:"mx-auto",children:[(0,_.jsx)(E.Z.First,{onClick:function(){return s(1)},disabled:o}),(0,_.jsx)(E.Z.Prev,{onClick:function(){return s(Math.max(t-1,1))},disabled:o}),h.map((function(e,n){return"..."===e?(0,_.jsx)(E.Z.Ellipsis,{},n):(0,_.jsx)(E.Z.Item,{active:e===t,onClick:function(){return s(e)},children:e},n)})),(0,_.jsx)(E.Z.Next,{onClick:function(){return s(Math.min(t+1,n))},disabled:u}),(0,_.jsx)(E.Z.Last,{onClick:function(){return s(n)},disabled:u})]})})}function Y(){var e=(0,s.v9)(d),t=(0,s.v9)(i),n=(0,s.v9)(u),l=(0,s.v9)(o),h=(0,c.$G)().t,p=(0,s.I0)();(0,a.useEffect)((function(){p((0,v.Td)({page:e,query:n}))}),[p,e,n,l]);return(0,_.jsxs)(r.B6,{children:[(0,_.jsx)(r.ql,{children:(0,_.jsx)("title",{children:h("helmet_title_todos_page")})}),(0,_.jsxs)("div",{className:"d-flex flex-column min-vh-100",children:[(0,_.jsx)(L,{}),(0,_.jsx)("h1",{className:"mb-3 pt-5 text-center",children:h("title_list_todo")}),(0,_.jsx)(T,{filter:n,page:e}),(0,_.jsx)(C,{}),(0,_.jsx)(G,{page:e,totalPages:t,handlePageChange:function(e){p((0,M.YA)(e)),p((0,v.Td)({page:e,query:n}))}})]})]})}}}]);
//# sourceMappingURL=952.c834ec9d.chunk.js.map